(function(e){"use strict";e.fn.lightbox=function(){function a(t){i=e(window).height()-n;s=e(window).width()-n;t.width("");t.height("");o=t[0].height;u=t[0].width;if(u>s){r=s/u;u=s;o=Math.round(o*r)}if(o>i){r=i/o;o=i;u=Math.round(u*r)}t.width(u).height(o);t.css({top:(e(".lightbox").height()-e(t).outerHeight()-10)/2+"px",left:(e(".lightbox").width()-e(t).outerWidth()-10)/2+"px"})}function f(){e(document).off("keydown");e(".lightbox").html("").fadeOut(function(){e(this).remove()});e("body").removeClass("blurred")}var t,n=50,r,i,s,o,u;e(this).click(function(n){function o(){e(".lightbox").append(s);a(s)}t=e(this);n.preventDefault();if(e(".lightbox").length===0){e("body").append('  <div class="lightbox" style="display:none;">  <a href="#" class="close-lightbox">Close</a>  <div class="lightbox-nav">	 <a href="#" class="lightbox-previous">previous</a>	 <a href="#" class="lightbox-next">next</a>  </div>  </div>  ');e(".lightbox").on("click",function(e){this===e.target&&f()});var r=function(){t.parents("li").next().find("a").click();e(".lightbox img").length&&f()},i=function(){t.parents("li").prev().find("a").click();e(".lightbox img").length&&f()};e(".lightbox").on("click",".lightbox-previous",function(){i();return!1});e(".lightbox").on("click",".lightbox-next",function(){r();return!1});e(".lightbox").on("click",".close-lightbox",function(){f();return!1});e(document).on("keydown",function(e){e.keyCode===27&&f();e.keyCode===39&&r();e.keyCode===37&&i()})}e(".lightbox img").remove();var s=e('<img src="'+t.attr("href")+'">');e("body").addClass("blurred");e(".lightbox").fadeIn().append('<span class="lightbox-loading"></span>');e(s).load(function(){e(".lightbox-loading").remove();o()})});e(window).resize(function(){if(e(".lightbox img").length===0)return;a(e(".lightbox img"))})}})(jQuery);