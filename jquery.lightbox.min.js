/*!
 * jquery.lightbox.js
 * https://github.com/duncanmcdougall/Responsive-Lightbox
 * Copyright 2013 Duncan McDougall and other contributors; @license Creative Commons Attribution 2.5
 */
(function(e){"use strict";e.fn.lightbox=function(i){var t={items:[],lightbox:null,image:null,margin:50,current:null,locked:!1,nav:!0,init:function(i){t.items=i,t.lightbox||(e("body").append('<div id="lightbox" style="display:none;"><div class="lightbox-nav"><a href="#" class="lightbox-close">Close</a><a href="#" class="lightbox-previous">previous</a><a href="#" class="lightbox-next">next</a></div></div>'),t.lightbox=e("#lightbox")),t.items.length>1&&t.nav?e(".lightbox-nav",t.lightbox).show():e(".lightbox-nav",t.lightbox).hide(),t.bindEvents()},loadImage:function(){e("body").addClass("blurred"),e("img",t.lightbox).remove(),t.lightbox.fadeIn("fast").append('<span class="lightbox-loading"></span>');var i=e('<img src="'+e(t.current).attr("href")+'" draggable="false">');e(i).load(function(){e(".lightbox-loading").remove(),t.lightbox.append(i),t.image=e("img",t.lightbox),t.image.hide(),t.resizeImage()})},resizeImage:function(){var i,n,o,l,r;n=e(window).height()-t.margin,o=e(window).outerWidth(!0)-t.margin,t.image.width(""),t.image.height(""),l=t.image.height(),r=t.image.width(),r>o&&(i=o/r,r=o,l=Math.round(l*i)),l>n&&(i=n/l,l=n,r=Math.round(r*i)),t.image.width(r).height(l),t.image.css({top:(e(window).height()-t.image.outerHeight())/2+"px",left:(e(window).width()-t.image.outerWidth())/2+"px"}),t.image.show(),t.locked=!1},getCurrentIndex:function(){return e.inArray(t.current,t.items)},next:function(){return t.locked?!1:(t.locked=!0,t.getCurrentIndex()>=t.items.length-1?t.items[0].click():t.items[t.getCurrentIndex()+1].click(),void 0)},previous:function(){return t.locked?!1:(t.locked=!0,0>=t.getCurrentIndex()?t.items[t.items.length-1].click():t.items[t.getCurrentIndex()-1].click(),void 0)},bindEvents:function(){e(t.items).click(function(i){var n=e(this)[0];i.preventDefault(),t.current=n,t.loadImage(),e(document).on("keydown",function(e){27===e.keyCode&&t.close(),39===e.keyCode&&t.next(),37===e.keyCode&&t.previous()})}),t.lightbox.on("click",function(e){this===e.target&&t.close()}),e(t.lightbox).on("click",".lightbox-previous",function(){return t.previous(),!1}),e(t.lightbox).on("click",".lightbox-next",function(){return t.next(),!1}),e(t.lightbox).on("click",".lightbox-close",function(){return t.close(),!1}),e(window).resize(function(){t.image&&t.resizeImage()})},close:function(){e(document).off("keydown"),e("#lightbox").fadeOut("fast",function(){}),e("body").removeClass("blurred")}};e.extend(t,i),t.init(this)}})(jQuery);